<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The meanings of flags and codes • weathercan</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="The meanings of flags and codes">
<meta property="og:description" content="weathercan">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">weathercan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/weathercan.html">Getting Started</a>
</li>
<li>
  <a href="http://steffilazerte.github.io/Presentations/#weathercan">Presentations</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html">All Articles</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/interpolate_data.html">Interpolating</a>
    </li>
    <li>
      <a href="../articles/articles/use_with_tidyverse.html">Using weathercan with the tidyverse</a>
    </li>
    <li>
      <a href="../articles/articles/mapping.html">Mapping weather data</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Reference vignetts</li>
    <li>
      <a href="../articles/flags.html">Data flags</a>
    </li>
    <li>
      <a href="../articles/glossary.html">Glossary of units and measurements</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/weathercan">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The meanings of flags and codes</h1>
                        <h4 class="author">Steffi LaZerte</h4>
            
            <h4 class="date">2020-08-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/weathercan/blob/master/vignettes/flags.Rmd"><code>vignettes/flags.Rmd</code></a></small>
      <div class="hidden name"><code>flags.Rmd</code></div>

    </div>

    
    
<div id="what-are-flagscodes" class="section level2">
<h2 class="hasAnchor">
<a href="#what-are-flagscodes" class="anchor"></a>What are flags/codes</h2>
<p>The data output of the <code><a href="../reference/weather_dl.html">weather_dl()</a></code> function include corresponding <code>_flag</code> columns for each data column. These columns are used by ECCC to add notes regarding measurements.</p>
<p>Similarly, the data output of the <code><a href="../reference/normals_dl.html">normals_dl()</a></code> function include corresponding <code>_code</code> columns. These columns are used by ECCC to add notes regarding the amount of data used to calculate the normals.</p>
<div id="flags" class="section level3">
<h3 class="hasAnchor">
<a href="#flags" class="anchor"></a>Flags</h3>
<p>In the <code><a href="../reference/weather_dl.html">weather_dl()</a></code> function if <code>format = TRUE</code> (the default), data corresponding to flags <code>M</code>, <code>NA</code>, <code>[empty]</code> and <code>L</code> are all replaced with <code>NA</code>.</p>
<p>For example, a sample of unformatted data from Magog station in Quebec looks like:</p>
<pre><code>## # A tibble: 12 x 6
##    station_name `Date/Time` `Total Precip (m… `Total Precip Fl… `Snow Grnd Last D… `Snow Grnd Last …
##    &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;            
##  1 MAGOG        2017-03     30.4              ^                 &lt;NA&gt;               M                
##  2 MAGOG        2017-04     114.0             ^                 0                  &lt;NA&gt;             
##  3 MAGOG        2017-05     78.8              ^                 0                  &lt;NA&gt;             
##  4 MAGOG        2017-06     140.7             ^                 0                  &lt;NA&gt;             
##  5 MAGOG        2017-07     80.7              &lt;NA&gt;              0                  &lt;NA&gt;             
##  6 MAGOG        2017-08     135.8             &lt;NA&gt;              0                  &lt;NA&gt;             
##  7 MAGOG        2017-09     63.0              ^                 0                  &lt;NA&gt;             
##  8 MAGOG        2017-10     140.8             ^                 0                  &lt;NA&gt;             
##  9 MAGOG        2017-11     70.0              ^                 0                  &lt;NA&gt;             
## 10 MAGOG        2017-12     45.7              ^                 10                 &lt;NA&gt;             
## 11 MAGOG        2018-01     34.6              ^                 2                  &lt;NA&gt;             
## 12 MAGOG        2018-02     77.2              ^                 0                  &lt;NA&gt;</code></pre>
<p>In this output, you can see two flags: <code><a href="https://rdrr.io/r/base/Arithmetic.html">^</a></code> in <code>Total Precip</code> and <code>M</code> in <code>Snow Grnd Last Day</code></p>
<p>This same sample, formatted looks like:</p>
<pre><code>## # A tibble: 12 x 5
##    date       total_precip total_precip_flag snow_grnd_last_day snow_grnd_last_day_flag
##    &lt;date&gt;            &lt;dbl&gt; &lt;chr&gt;                          &lt;dbl&gt; &lt;chr&gt;                  
##  1 2017-03-01         30.4 ^                                 NA M                      
##  2 2017-04-01        114   ^                                  0 &lt;NA&gt;                   
##  3 2017-05-01         78.8 ^                                  0 &lt;NA&gt;                   
##  4 2017-06-01        141.  ^                                  0 &lt;NA&gt;                   
##  5 2017-07-01         80.7 &lt;NA&gt;                               0 &lt;NA&gt;                   
##  6 2017-08-01        136.  &lt;NA&gt;                               0 &lt;NA&gt;                   
##  7 2017-09-01         63   ^                                  0 &lt;NA&gt;                   
##  8 2017-10-01        141.  ^                                  0 &lt;NA&gt;                   
##  9 2017-11-01         70   ^                                  0 &lt;NA&gt;                   
## 10 2017-12-01         45.7 ^                                 10 &lt;NA&gt;                   
## 11 2018-01-01         34.6 ^                                  2 &lt;NA&gt;                   
## 12 2018-02-01         77.2 ^                                  0 &lt;NA&gt;</code></pre>
<p>As you can see, we still have the two flags, but the missing data flag (<code>M</code>) is now replaced with NA. The other flag <code><a href="https://rdrr.io/r/base/Arithmetic.html">^</a></code> is not, as it indicates that “The value displayed is based on incomplete data” (see below).</p>
</div>
<div id="flags---weather-data" class="section level3">
<h3 class="hasAnchor">
<a href="#flags---weather-data" class="anchor"></a>Flags - Weather Data</h3>
<p>The flags index can be accessed through the built in data frame: <code>flags</code></p>
<table class="table">
<thead><tr class="header">
<th align="left">code</th>
<th align="left">meaning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">[empty]</td>
<td align="left">Indicates an unobserved value</td>
</tr>
<tr class="even">
<td align="left">†</td>
<td align="left">Data that is not subject to review by the National Climate Archives</td>
</tr>
<tr class="odd">
<td align="left">^</td>
<td align="left">The value displayed is based on incomplete data</td>
</tr>
<tr class="even">
<td align="left">A</td>
<td align="left">Accumulated</td>
</tr>
<tr class="odd">
<td align="left">B</td>
<td align="left">More than one occurrence and estimated</td>
</tr>
<tr class="even">
<td align="left">C</td>
<td align="left">Precipitation occurred, amount uncertain</td>
</tr>
<tr class="odd">
<td align="left">E</td>
<td align="left">Estimated</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Accumulated and estimated</td>
</tr>
<tr class="odd">
<td align="left">L</td>
<td align="left">Precipitation may or may not have occurred</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Missing</td>
</tr>
<tr class="odd">
<td align="left">N</td>
<td align="left">Temperature missing but known to be &gt; 0</td>
</tr>
<tr class="even">
<td align="left">S</td>
<td align="left">More than one occurrence</td>
</tr>
<tr class="odd">
<td align="left">T</td>
<td align="left">Trace</td>
</tr>
<tr class="even">
<td align="left">Y</td>
<td align="left">Temperature missing but known to be &lt; 0</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">Not Available</td>
</tr>
</tbody>
</table>
</div>
<div id="codes" class="section level3">
<h3 class="hasAnchor">
<a href="#codes" class="anchor"></a>Codes</h3>
<p>In the <code>normals_dl</code>() function, codes are associated with each variable:</p>
<pre><code>## # A tibble: 13 x 7
##    period temp_daily_aver… temp_daily_aver… temp_daily_max temp_daily_max_… temp_daily_min
##    &lt;fct&gt;             &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;
##  1 Jan               -16.6 A                         -11.1 A                         -21.9
##  2 Feb               -13.6 A                          -8.1 A                         -19  
##  3 Mar                -6.2 A                          -1   A                         -11.4
##  4 Apr                 4   A                          10.5 A                          -2.6
##  5 May                10.6 A                          17.8 A                           3.4
##  6 Jun                15.9 A                          22.4 A                           9.3
##  7 Jul                18.5 A                          25.2 A                          11.7
##  8 Aug                17.7 A                          24.9 A                          10.4
##  9 Sep                11.8 A                          18.9 A                           4.7
## 10 Oct                 4.1 A                          10.4 A                          -2.2
## 11 Nov                -5.6 A                          -0.5 A                         -10.6
## 12 Dec               -14   A                          -9   A                         -19  
## 13 Year                2.2 A                           8.4 A                          -3.9
## # … with 1 more variable: temp_daily_min_code &lt;chr&gt;</code></pre>
<p>For example, here, the code indicates that these temperature variables meet the WMO ‘3 and 5 rule’ (no more than 3 consecutive and no more than 5 total missing for either temperature or precipitation).</p>
</div>
<div id="codes---climate-normals" class="section level3">
<h3 class="hasAnchor">
<a href="#codes---climate-normals" class="anchor"></a>Codes - Climate Normals</h3>
<p>The codes index for climate normals can be accessed through the built-in data frame: <code>codes</code></p>
<table class="table">
<thead><tr class="header">
<th align="left">code</th>
<th align="left">meaning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="left">WMO ‘3 and 5 rule’ (i.e. no more than 3 consecutive and no more than 5 total missing for either temperature or precipitation)</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="left">At least 25 years</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="left">At least 20 years</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="left">At least 15 years</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steffi LaZerte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
