<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download climate normals from Environment and Climate Change Canada — normals_dl • weathercan</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Download climate normals from Environment and Climate Change Canada — normals_dl" />
<meta property="og:description" content="Downloads climate normals from Environment and Climate Change Canada (ECCC)
for one or more stations (defined by climate_ids). For details and units,
see the glossary_normals data frame or the glossary_normals vignette:
vignette(&quot;glossary_normals&quot;, package = &quot;weathercan&quot;)" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">weathercan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/weathercan.html">Getting Started</a>
</li>
<li>
  <a href="http://steffilazerte.github.io/Presentations/#weathercan">Presentations</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/index.html">All Articles</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/interpolate_data.html">Interpolating</a>
    </li>
    <li>
      <a href="../articles/articles/use_with_tidyverse.html">Using weathercan with the tidyverse</a>
    </li>
    <li>
      <a href="../articles/articles/mapping.html">Mapping weather data</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Reference vignetts</li>
    <li>
      <a href="../articles/flags.html">Data flags</a>
    </li>
    <li>
      <a href="../articles/glossary.html">Glossary of units and measurements</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/weathercan">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download climate normals from Environment and Climate Change Canada</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/weathercan/blob/master/R/normals.R'><code>R/normals.R</code></a></small>
    <div class="hidden name"><code>normals_dl.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Downloads climate normals from Environment and Climate Change Canada (ECCC)
for one or more stations (defined by <code>climate_id</code>s). For details and units,
see the <code><a href='glossary_normals.html'>glossary_normals</a></code> data frame or the <code>glossary_normals</code> vignette:
<code><a href='../articles/glossary_normals.html'>vignette("glossary_normals", package = "weathercan")</a></code></p>
    </div>

    <pre class="usage"><span class='fu'>normals_dl</span>(
  <span class='no'>climate_ids</span>,
  <span class='kw'>normals_years</span> <span class='kw'>=</span> <span class='st'>"1981-2010"</span>,
  <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>stn</span> <span class='kw'>=</span> <span class='kw pkg'>weathercan</span><span class='kw ns'>::</span><span class='no'><a href='stations.html'>stations</a></span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>climate_ids</th>
      <td><p>Character. A vector containing the Climate ID(s) of the
station(s) you wish to download data from. See the <code><a href='stations.html'>stations</a></code>
data frame or the <code><a href='stations_search.html'>stations_search</a></code> function to find Climate
IDs.</p></td>
    </tr>
    <tr>
      <th>normals_years</th>
      <td><p>Character. The year range for which you want climate
normals. Default "1981-2010".</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>Logical. If TRUE (default) formats measurements to numeric and
date accordingly. Unlike <code><a href='weather_dl.html'>weather_dl()</a></code>, <code>normals_dl()</code> will always format
column headings as normals data from ECCC cannot be directly made into a
data frame without doing so.</p></td>
    </tr>
    <tr>
      <th>stn</th>
      <td><p>Data frame. The <code>stations</code> data frame to use. Will use the
one included in the package unless otherwise specified.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical. Include progress messages</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Logical. Suppress all messages (including messages regarding
missing data, etc.)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>tibble with nested normals and first/last frost data</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Climate normals from ECCC include two types of data, averages by
month for a variety of measurements as well as data relating to the
frost-free period. Because these two data sources are quite different, we
return them as nested data so the user can extract them as they wish. See
examples for how to use the <code><a href='https://tidyr.tidyverse.org/reference/nest.html'>unnest()</a></code> function from the <a href='https://tidyr.tidyverse.org/'><code>tidyr</code></a>
package to extract the two different datasets.</p>
<p>The data also returns a column called <code>meets_wmo</code> this reflects whether or
not the climate normals for this station met the WMO standards for
temperature and precipitation (i.e. both have code &gt;= A). Each measurement
column has a corresponding <code>_code</code> column which reflects the data quality
of that measurement (see the <a href='https://climate.weather.gc.ca/doc/Canadian_Climate_Normals_1981_2010_Calculation_Information.pdf'>ECCC calculations document</a>
for more details)</p>
<p>Climate normals are downloaded from the url stored in option
<code>weathercan.urls.normals</code>. To change this location use:
<code><a href='https://rdrr.io/r/base/options.html'>options(weathercan.urls.normals = "your_new_url")</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Find the climate_id</span>
<span class='fu'><a href='stations_search.html'>stations_search</a></span>(<span class='st'>"Brandon A"</span>, <span class='kw'>normals_only</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Download climate normals</span>
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>normals_dl</span>(<span class='kw'>climate_ids</span> <span class='kw'>=</span> <span class='st'>"5010480"</span>)

<span class='co'># Pull out last frost data</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>tidyr</span>)
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/nest.html'>unnest</a></span>(<span class='no'>n</span>, <span class='no'>frost</span>)

<span class='co'># Pull out normals</span>
<span class='no'>nm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/nest.html'>unnest</a></span>(<span class='no'>n</span>, <span class='no'>normals</span>)

<span class='co'># Download multiple stations</span>
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>normals_dl</span>(<span class='kw'>climate_ids</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"3010234"</span>, <span class='st'>"3010410"</span>, <span class='st'>"3010815"</span>))
<span class='no'>n</span>

<span class='co'># Note that some have files online but no data</span>
<span class='no'>n</span>$<span class='no'>normals</span>[<span class='fl'>2</span>]

<span class='co'># Some have no last frost data</span>
<span class='no'>n</span>$<span class='no'>frost</span>[<span class='fl'>3</span>]

<span class='co'># Note, putting both into the same data set can be done but makes for</span>
<span class='co'># a very unweildly dataset (there is lots of repetition)</span>
<span class='no'>nm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/nest.html'>unnest</a></span>(<span class='no'>n</span>, <span class='no'>normals</span>)
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/nest.html'>unnest</a></span>(<span class='no'>n</span>, <span class='no'>frost</span>)
<span class='no'>both</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>full_join</a></span>(<span class='no'>nm</span>, <span class='no'>f</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steffi LaZerte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


