<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download weather data from Environment and Climate Change Canada — weather_dl • weathercan</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Download weather data from Environment and Climate Change Canada — weather_dl" />
<meta property="og:description" content="Downloads data from Environment and Climate Change Canada (ECCC) for one or
more stations. For details and units, see the glossary vignette
(vignette(&quot;glossary&quot;, package = &quot;weathercan&quot;)) or the glossary online
https://climate.weather.gc.ca/glossary_e.html." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">weathercan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/weathercan.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/weathercan">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download weather data from Environment and Climate Change Canada</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/weathercan/blob/master/R/weather.R'><code>R/weather.R</code></a></small>
    <div class="hidden name"><code>weather_dl.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Downloads data from Environment and Climate Change Canada (ECCC) for one or
more stations. For details and units, see the glossary vignette
(<code><a href='../articles/glossary.html'>vignette("glossary", package = "weathercan")</a></code>) or the glossary online
<a href='https://climate.weather.gc.ca/glossary_e.html'>https://climate.weather.gc.ca/glossary_e.html</a>.</p>
    </div>

    <pre class="usage"><span class='fu'>weather_dl</span><span class='op'>(</span>
  <span class='va'>station_ids</span>,
  start <span class='op'>=</span> <span class='cn'>NULL</span>,
  end <span class='op'>=</span> <span class='cn'>NULL</span>,
  interval <span class='op'>=</span> <span class='st'>"hour"</span>,
  trim <span class='op'>=</span> <span class='cn'>TRUE</span>,
  format <span class='op'>=</span> <span class='cn'>TRUE</span>,
  string_as <span class='op'>=</span> <span class='cn'>NA</span>,
  time_disp <span class='op'>=</span> <span class='st'>"none"</span>,
  stn <span class='op'>=</span> <span class='cn'>NULL</span>,
  encoding <span class='op'>=</span> <span class='st'>"UTF-8"</span>,
  list_col <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>station_ids</th>
      <td><p>Numeric/Character. A vector containing the ID(s) of the
station(s) you wish to download data from. See the <code><a href='stations.html'>stations</a></code>
data frame or the <code><a href='stations_search.html'>stations_search</a></code> function to find IDs.</p></td>
    </tr>
    <tr>
      <th>start</th>
      <td><p>Date/Character. The start date of the data in YYYY-MM-DD format
(applies to all stations_ids). Defaults to start of range.</p></td>
    </tr>
    <tr>
      <th>end</th>
      <td><p>Date/Character. The end date of the data in YYYY-MM-DD format
(applies to all station_ids). Defaults to end of range.</p></td>
    </tr>
    <tr>
      <th>interval</th>
      <td><p>Character. Interval of the data, one of "hour", "day",
"month".</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>Logical. Trim missing values from the start and end of the
weather dataframe. Only applies if <code>format = TRUE</code></p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>Logical. If TRUE, formats data for immediate use. If FALSE,
returns data exactly as downloaded from Environment and Climate Change
Canada. Useful for dealing with changes by Environment Canada to the format
of data downloads.</p></td>
    </tr>
    <tr>
      <th>string_as</th>
      <td><p>Character. What value to replace character strings in a
numeric measurement with. See Details.</p></td>
    </tr>
    <tr>
      <th>time_disp</th>
      <td><p>Character. Either "none" (default) or "UTC". See details.</p></td>
    </tr>
    <tr>
      <th>stn</th>
      <td><p>DEFUNCT. Now use <code><a href='stations_dl.html'>stations_dl()</a></code> to update internal data and
<code><a href='stations_meta.html'>stations_meta()</a></code> to check the date it was last updated.</p></td>
    </tr>
    <tr>
      <th>encoding</th>
      <td><p>Character. Text encoding for download.</p></td>
    </tr>
    <tr>
      <th>list_col</th>
      <td><p>Logical. Return data as nested data set? Defaults to FALSE.
Only applies if <code>format = TRUE</code></p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical. Include progress messages</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Logical. Suppress all messages (including messages regarding
missing data, etc.)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with station ID, name and weather data.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Data can be returned 'raw' (format = FALSE) or can be formatted.
Formatting transforms dates/times to date/time class, renames columns, and
converts data to numeric where possible. If character strings are contained
in traditionally numeric fields (e.g., weather speed may have values such
as "&lt; 30"), they can be replaced with a character specified by <code>string_as</code>.
The default is NA. Formatting also replaces data associated with certain
flags with NA (M = Missing).</p>
<p>Start and end date can be specified, but if not, it will default to the
start and end date of the range (this could result in downloading a lot of
data!).</p>
<p>For hourly data, timezones are always "UTC", but the actual times are
either local time (default; <code>time_disp = "none"</code>), or UTC (<code>time_disp = "UTC"</code>). When <code>time_disp = "none"</code>, times reflect the local time without
daylight savings. This means that relative measures of time, such as
"nighttime", "daytime", "dawn", and "dusk" are comparable among stations in
different timezones. This is useful for comparing daily cycles. When
<code>time_disp = "UTC"</code> the times are transformed into UTC timezone. Thus
midnight in Kamloops would register as 08:00:00 (Pacific time is 8 hours
behind UTC). This is useful for tracking weather events through time, but
will result in odd 'daily' measures of weather (e.g., data collected in the
afternoon on Sept 1 in Kamloops will be recorded as being collected on Sept
2 in UTC).</p>
<p>Files are downloaded from the url stored in
<code><a href='https://rdrr.io/r/base/options.html'>getOption("weathercan.urls.weather")</a></code>. To change this location use
<code><a href='https://rdrr.io/r/base/options.html'>options(weathercan.urls.weather = "your_new_url")</a></code>.</p>
<p>Data is downloaded from ECCC as a series of files which are then bound
together. Each file corresponds to a different month, or year, depending on
the interval. Metadata (station name, lat, lon, elevation, etc.) is
extracted from the start of the most recent file (i.e. most recent dates)
for a given station. Note that important data (i.e. station name, lat, lon)
is unlikely to change between files (i.e. dates), but some data may or may
not be available depending on the date of the file (e.g., station operator
was added as of April 1st 2018, so will be in all data which includes dates
on or after April 2018).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples">weather_dl,Download weather data from Environment and Climate Change Canada,Download weather data from Environment and Climate Change Canada — weather_dl,Source: <a href='https://github.com/ropensci/weathercan/blob/master/R/weather.R'><code>R/weather.R</code></a>,weather_dl.Rd,character(0),c("weather_dl", "weather"),character(0),list(title = "Description", contents = "<p>Downloads data from Environment and Climate Change Canada (ECCC) for one or\nmore stations. For details and units, see the glossary vignette\n(<code><a href='../articles/glossary.html'>vignette(\"glossary\", package = \"weathercan\")</a></code>) or the glossary online\n<a href='https://climate.weather.gc.ca/glossary_e.html'>https://climate.weather.gc.ca/glossary_e.html</a>.</p>"),list(description = "Downloads data from Environment and Climate Change Canada (ECCC) for one or\nmore stations. For details and units, see the glossary vignette\n(vignette(\"glossary\", package = \"weathercan\")) or the glossary online\nhttps://climate.weather.gc.ca/glossary_e.html."),<span class='fu'>weather_dl</span><span class='op'>(</span>
  <span class='va'>station_ids</span>,
  start <span class='op'>=</span> <span class='cn'>NULL</span>,
  end <span class='op'>=</span> <span class='cn'>NULL</span>,
  interval <span class='op'>=</span> <span class='st'>"hour"</span>,
  trim <span class='op'>=</span> <span class='cn'>TRUE</span>,
  format <span class='op'>=</span> <span class='cn'>TRUE</span>,
  string_as <span class='op'>=</span> <span class='cn'>NA</span>,
  time_disp <span class='op'>=</span> <span class='st'>"none"</span>,
  stn <span class='op'>=</span> <span class='cn'>NULL</span>,
  encoding <span class='op'>=</span> <span class='st'>"UTF-8"</span>,
  list_col <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>,list(list(name = "station_ids", description = "<p>Numeric/Character. A vector containing the ID(s) of the\nstation(s) you wish to download data from. See the <code><a href='stations.html'>stations</a></code>\ndata frame or the <code><a href='stations_search.html'>stations_search</a></code> function to find IDs.</p>"), list(name = "start", description = "<p>Date/Character. The start date of the data in YYYY-MM-DD format\n(applies to all stations_ids). Defaults to start of range.</p>"), list(name = "end", 
    description = "<p>Date/Character. The end date of the data in YYYY-MM-DD format\n(applies to all station_ids). Defaults to end of range.</p>"), list(name = "interval", description = "<p>Character. Interval of the data, one of \"hour\", \"day\",\n\"month\".</p>"), list(name = "trim", description = "<p>Logical. Trim missing values from the start and end of the\nweather dataframe. Only applies if <code>format = TRUE</code></p>"), list(name = "format", description = "<p>Logical. If TRUE, formats data for immediate use. If FALSE,\nreturns data exactly as downloaded from Environment and Climate Change\nCanada. Useful for dealing with changes by Environment Canada to the format\nof data downloads.</p>"), 
    list(name = "string_as", description = "<p>Character. What value to replace character strings in a\nnumeric measurement with. See Details.</p>"), list(name = "time_disp", description = "<p>Character. Either \"none\" (default) or \"UTC\". See details.</p>"), list(name = "stn", description = "<p>DEFUNCT. Now use <code><a href='stations_dl.html'>stations_dl()</a></code> to update internal data and\n<code><a href='stations_meta.html'>stations_meta()</a></code> to check the date it was last updated.</p>"), 
    list(name = "encoding", description = "<p>Character. Text encoding for download.</p>"), list(name = "list_col", description = "<p>Logical. Return data as nested data set? Defaults to FALSE.\nOnly applies if <code>format = TRUE</code></p>"), list(name = "verbose", description = "<p>Logical. Include progress messages</p>"), list(name = "quiet", description = "<p>Logical. Suppress all messages (including messages regarding\nmissing data, etc.)</p>")),TRUE,<div class='input'>
<span class='co'># \donttest{</span>
<span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='check_eccc.html'>check_eccc</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>  <span class='co'># Make sure ECCC is available</span>

  <span class='va'>kam</span> <span class='op'>&lt;-</span> <span class='fu'>weather_dl</span><span class='op'>(</span>station_ids <span class='op'>=</span> <span class='fl'>51423</span>,
                    start <span class='op'>=</span> <span class='st'>"2016-01-01"</span>, end <span class='op'>=</span> <span class='st'>"2016-02-15"</span><span class='op'>)</span>

  <span class='fu'><a href='stations_search.html'>stations_search</a></span><span class='op'>(</span><span class='st'>"Kamloops A$"</span>, interval <span class='op'>=</span> <span class='st'>"hour"</span><span class='op'>)</span>
  <span class='fu'><a href='stations_search.html'>stations_search</a></span><span class='op'>(</span><span class='st'>"Prince George Airport"</span>, interval <span class='op'>=</span> <span class='st'>"hour"</span><span class='op'>)</span>

  <span class='va'>kam.pg</span> <span class='op'>&lt;-</span> <span class='fu'>weather_dl</span><span class='op'>(</span>station_ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>48248</span>, <span class='fl'>51423</span><span class='op'>)</span>,
                       start <span class='op'>=</span> <span class='st'>"2016-01-01"</span>, end <span class='op'>=</span> <span class='st'>"2016-02-15"</span><span class='op'>)</span>

  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>

  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>kam.pg</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>time</span>, y <span class='op'>=</span> <span class='va'>temp</span>,
                            group <span class='op'>=</span> <span class='va'>station_name</span>,
                            colour <span class='op'>=</span> <span class='va'>station_name</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
         <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span><span class='op'>)</span>
 <span class='op'>}</span><span class='co'># }</span>
</div><div class='output co'>#&gt; <span class='message'>As of weathercan v0.3.0 time display is either local time or UTC</span>
#&gt; <span class='message'>See Details under ?weather_dl for more information.</span>
#&gt; <span class='message'>This message is shown once per session</span></div><div class='img'><img src='weather_dl-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div>,list(list(title = "Value", contents = "<p>A tibble with station ID, name and weather data.</p>", slug = "value"), list(title = "Details", contents = "<p>Data can be returned 'raw' (format = FALSE) or can be formatted.\nFormatting transforms dates/times to date/time class, renames columns, and\nconverts data to numeric where possible. If character strings are contained\nin traditionally numeric fields (e.g., weather speed may have values such\nas \"&lt; 30\"), they can be replaced with a character specified by <code>string_as</code>.\nThe default is NA. Formatting also replaces data associated with certain\nflags with NA (M = Missing).</p>\n<p>Start and end date can be specified, but if not, it will default to the\nstart and end date of the range (this could result in downloading a lot of\ndata!).</p>\n<p>For hourly data, timezones are always \"UTC\", but the actual times are\neither local time (default; <code>time_disp = \"none\"</code>), or UTC (<code>time_disp = \"UTC\"</code>). When <code>time_disp = \"none\"</code>, times reflect the local time without\ndaylight savings. This means that relative measures of time, such as\n\"nighttime\", \"daytime\", \"dawn\", and \"dusk\" are comparable among stations in\ndifferent timezones. This is useful for comparing daily cycles. When\n<code>time_disp = \"UTC\"</code> the times are transformed into UTC timezone. Thus\nmidnight in Kamloops would register as 08:00:00 (Pacific time is 8 hours\nbehind UTC). This is useful for tracking weather events through time, but\nwill result in odd 'daily' measures of weather (e.g., data collected in the\nafternoon on Sept 1 in Kamloops will be recorded as being collected on Sept\n2 in UTC).</p>\n<p>Files are downloaded from the url stored in\n<code><a href='https://rdrr.io/r/base/options.html'>getOption(\"weathercan.urls.weather\")</a></code>. To change this location use\n<code><a href='https://rdrr.io/r/base/options.html'>options(weathercan.urls.weather = \"your_new_url\")</a></code>.</p>\n<p>Data is downloaded from ECCC as a series of files which are then bound\ntogether. Each file corresponds to a different month, or year, depending on\nthe interval. Metadata (station name, lat, lon, elevation, etc.) is\nextracted from the start of the most recent file (i.e. most recent dates)\nfor a given station. Note that important data (i.e. station name, lat, lon)\nis unlikely to change between files (i.e. dates), but some data may or may\nnot be available depending on the date of the file (e.g., station operator\nwas added as of April 1st 2018, so will be in all data which includes dates\non or after April 2018).</p>", 
    slug = "details")),2021,list(name = "weathercan", version = "0.6.0", authors = "Steffi LaZerte"),list(destination = "dev", mode = "release", version_label = "default", version_tooltip = "Released version", in_dev = FALSE),list(root = "../", title = "weathercan"),list(css = "/home/steffi/Projects/weathercan/pkgdown/extra.css"),list(type = "inverse", left = "<li>\n  <a href=\"../index.html\">\n    <span class=\"fas fa-home\"></span>\n     \n  </a>\n</li>\n<li>\n  <a href=\"../articles/weathercan.html\">Getting Started</a>\n</li>\n<li>\n  <a href=\"../reference/index.html\">Reference</a>\n</li>\n<li>\n  <a href=\"../articles/index.html\">Articles</a>\n</li>", right = "<li>\n  <a href=\"https://github.com/ropensci/weathercan\">\n    <span class=\"fas fa-github fa-lg\"></span>\n     \n  </a>\n</li>"),list(.present = TRUE),list(version = "1.6.1"),FALSE</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steffi LaZerte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


